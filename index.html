<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Defend the Castle</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <main class="app">
      <canvas id="game-canvas" width="800" height="600"></canvas>
    </main>

    <!-- UI Overlay -->
    <div id="ui-overlay">
      <!-- Top buttons -->
      <button id="btn-end-turn" class="ui-btn top-left">End Turn</button>
      <button id="btn-character" class="ui-btn top-right">Character</button>
      <button id="btn-fireball" class="ui-btn top-right fireball-btn hidden">F</button>
      <button id="btn-dragon" class="ui-btn top-right dragon-btn hidden">G</button>
      <button id="btn-hand" class="ui-btn bottom-right">Hand</button>
      <button id="btn-merchant" class="ui-btn bottom-left hidden">Merchant</button>

      <!-- Card detail panel (drop zone only) -->
      <div id="card-detail" class="card-detail hidden">
        <div class="card-detail-zones">
          <div class="drop-zone" id="play-card-zone">
            <span class="drop-zone-title"></span>
            <span class="drop-zone-desc"></span>
          </div>
        </div>
      </div>

      <!-- Bottom drawer (hand area) -->
      <div id="hand-drawer" class="hand-drawer collapsed">
        <div class="drawer-content">
          <div class="drawer-left">
            <div class="pile-count" id="discard-count">
              <span class="pile-label">Discard</span>
              <span class="pile-number">0</span>
            </div>
          </div>
          <div class="drawer-middle" id="hand-cards">
            <!-- Cards rendered dynamically from state.player.hand -->
          </div>
          <div class="drawer-right">
            <div class="pile-count" id="deck-count">
              <span class="pile-label">Deck</span>
              <span class="pile-number">5</span>
            </div>
          </div>
        </div>
      </div>

      <!-- Character sheet panel (slides from right) -->
      <div id="ui-backdrop" class="ui-backdrop hidden"></div>
      <div id="merchant-backdrop" class="merchant-backdrop hidden"></div>
      <div id="character-sheet" class="character-sheet hidden">
        <div class="sheet-header">
          <h2>Character Sheet</h2>
          <!-- I am hiding the following button because removing it breaks the code. need to fix later -->
          <button id="btn-close-sheet" class="ui-btn sheet-close">x</button>
          <!-- ************************ -->
        </div>
        <div class="sheet-content">
          <div class="sheet-section" id="concept-image">
            <img
              src="./assets/concepts/warrior_concept.png"
              alt="Warrior concept art"
              class="concept-art"
            />
          </div>
          <div class="sheet-section">
            <h3 class="sheet-title">Character</h3>
            <div class="stat-row"><span>Class:</span><span>Warrior</span></div>
            <div class="stat-row"><span>Weapon:</span><span>Sword</span></div>
            <div class="stat-row"><span>Damage:</span><span id="stat-damage">10</span></div>
            <div class="stat-row"><span>Range:</span><span id="stat-range">1</span></div>
            <div class="stat-row"><span>Speed:</span><span id="stat-movement">3</span></div>
            <div class="stat-row"><span>Gold:</span><span id="stat-gold">0</span></div>
          </div>
          <div class="sheet-section" id="gear-section">
            <h3 class="sheet-title">Equipped Gear</h3>
            <div class="gear-slots" id="gear-slots">
              <div class="gear-slot" data-slot="head"><span class="slot-label">Head</span><span class="slot-value slot-empty">Empty</span></div>
              <div class="gear-slot" data-slot="body"><span class="slot-label">Body</span><span class="slot-value slot-empty">Empty</span></div>
              <div class="gear-slot" data-slot="hand"><span class="slot-label">Hand</span><span class="slot-value slot-empty">Empty</span></div>
              <div class="gear-slot" data-slot="foot"><span class="slot-label">Foot</span><span class="slot-value slot-empty">Empty</span></div>
              <div class="gear-slot" data-slot="mount"><span class="slot-label">Mount</span><span class="slot-value slot-empty">Empty</span></div>
            </div>
            <h3 class="sheet-title">Inventory</h3>
            <div class="inventory-list" id="inventory-list">
              <!-- Up to 10 items rendered dynamically -->
            </div>
          </div>
        </div>
      </div>

      <!-- Merchant panel (slides from left) -->
      <div id="merchant-panel" class="merchant-panel hidden">
        <div id="merchant-drop" class="merchant-drop"></div>
        <div class="sheet-content merchant-content">
          <div class="sheet-section merchant-left">
            <div style="display: flex; justify-content: space-between;">
              <h3 class="sheet-title">Player Gold:  </h3><h3 id="merchant-gold-value" class="sheet-title"></h3>
            </div>
            <div class="merchant-portrait">Merchant</div>
          </div>
          <div class="sheet-section merchant-right">
          <div class="merchant-grid" id="merchant-grid">
            <!-- Slots rendered by UI -->
          </div>
        </div>
      </div>

      <!-- Merchant card detail (bottom sheet) -->
      <div id="merchant-detail-backdrop" class="merchant-detail-backdrop hidden"></div>
      <div id="merchant-detail" class="merchant-detail hidden">
        <div class="merchant-detail-content">
          <button id="btn-close-merchant-detail" class="merchant-detail-close">âœ•</button>
          <h3 id="merchant-detail-name" class="merchant-detail-name"></h3>
          <p id="merchant-detail-desc" class="merchant-detail-desc"></p>
          <div class="merchant-detail-meta">
            <span id="merchant-detail-cost" class="merchant-detail-cost"></span>
            <span id="merchant-detail-remaining" class="merchant-detail-remaining"></span>
          </div>
        </div>
      </div>
    </div>
    </div>

    <script type="module" src="./src/main.js"></script>
  </body>
</html>
